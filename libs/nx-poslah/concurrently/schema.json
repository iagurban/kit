{
  "$schema": "https://json-schema.org/schema",
  "version": 2,
  "title": "Poslah Concurrently Executor",
  "description": "Runs multiple commands concurrently with a structured and reliable interface.",
  "type": "object",
  "properties": {
    "processes": {
      "type": "array",
      "description": "An array of process objects to run concurrently.",
      "items": {
        "type": "object",
        "properties": {
          "command": {
            "type": "string",
            "description": "The command to execute for this process."
          },
          "name": {
            "type": "string",
            "description": "A custom name for the process, used in the prefix. If not provided, a default will be used."
          },
          "color": {
            "type": "string",
            "description": "A chalk color for the prefix (e.g., 'blue', 'magenta', '#ff0000')."
          },
          "hide": {
            "type": "boolean",
            "description": "If true, hides the output of this process.",
            "default": false
          }
        },
        "required": ["command"]
      }
    },
    "success": {
      "type": "string",
      "description": "Specifies which command(s) must exit with code 0 for the entire run to be considered a success. E.g., 'first', 'last', 'all', 'command-API', '!command-0'."
    },
    "maxProcesses": {
      "type": "number",
      "description": "The maximum number of processes that should run at once."
    },
    "raw": {
      "type": "boolean",
      "description": "If true, outputs only the raw output of processes, disabling prettifying and coloring."
    },
    "noColor": {
      "type": "boolean",
      "description": "If true, disables colors from concurrently's logging."
    },
    "group": {
      "type": "boolean",
      "description": "If true, orders the output as if the commands were run sequentially."
    },
    "timings": {
      "type": "boolean",
      "description": "If true, shows timing information for all processes when they end."
    },
    "passthroughArguments": {
      "type": "boolean",
      "description": "Passthrough additional arguments to commands (accessible via placeholders) instead of treating them as commands."
    },
    "teardown": {
      "type": "array",
      "description": "A list of cleanup commands to execute before concurrently exits.",
      "items": { "type": "string" }
    },
    "prefix": {
      "description": "Prefix used in logging for each process. Can be a keyword or a custom template like '{time}-{pid}'.",
      "oneOf": [
        {
          "type": "string",
          "enum": ["index", "pid", "time", "command", "name", "none"]
        },
        {
          "type": "string"
        }
      ]
    },
    "prefixLength": {
      "type": "number",
      "description": "Limits how many characters of the command are displayed in the 'command' prefix."
    },
    "timestampFormat": {
      "type": "string",
      "description": "A Unicode format string for the timestamp prefix, e.g., 'yyyy-MM-dd HH:mm:ss.SSS'."
    },
    "padPrefix": {
      "type": "boolean",
      "description": "Pads short prefixes with spaces so that all prefixes have the same length."
    },
    "handleInput": {
      "type": "boolean",
      "description": "Whether keyboard input should be forwarded to the child processes."
    },
    "defaultInputTarget": {
      "type": "string",
      "description": "The name or index of the child process to which keyboard input should be sent by default."
    },
    "killOthers": {
      "type": "boolean",
      "description": "If true, kills all other processes as soon as the first one exits."
    },
    "killOthersOnFail": {
      "type": "boolean",
      "description": "If true, kills all other processes if one of them exits with a non-zero status code."
    },
    "killSignal": {
      "type": "string",
      "description": "The signal to send when killing other processes (e.g., 'SIGTERM', 'SIGKILL')."
    },
    "killTimeout": {
      "type": "number",
      "description": "How many milliseconds to wait before forcefully terminating a process."
    },
    "restartTries": {
      "type": "number",
      "description": "How many times a process that has died should be restarted. A negative number means restart forever."
    },
    "restartAfter": {
      "description": "Delay in milliseconds before restarting a process. Can also be the string 'exponential'.",
      "oneOf": [
        { "type": "number" },
        { "type": "string", "enum": ["exponential"] }
      ]
    },
    "cwd": {
      "type": "string",
      "description": "The working directory to run commands from. Will be created if it doesn't exist."
    },
    "runner": {
      "type": "string",
      "description": "The package runner to use for executing the command (e.g., 'yarn', 'npx', 'pnpm').",
      "default": "yarn"
    }
  },
  "required": ["processes"]
}
