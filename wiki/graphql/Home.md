# @grbn/kit

## Classes

- [UnauthenticatedError](Class.UnauthenticatedError.md)

## Type Aliases

- [BasicSelectionArgs](TypeAlias.BasicSelectionArgs.md)
- [GqlASTField](TypeAlias.GqlASTField.md)
- [GqlASTFragmentDefinition](TypeAlias.GqlASTFragmentDefinition.md)
- [GqlASTFragmentSpread](TypeAlias.GqlASTFragmentSpread.md)
- [GqlASTInlineFragmentSpread](TypeAlias.GqlASTInlineFragmentSpread.md)
- [GqlASTLoc](TypeAlias.GqlASTLoc.md)
- [GqlASTName](TypeAlias.GqlASTName.md)
- [GqlASTSelectionSet](TypeAlias.GqlASTSelectionSet.md)
- [GqlContextInfo](TypeAlias.GqlContextInfo.md)

## Functions

- [cacheKeyFromGraphqlPath](Function.cacheKeyFromGraphqlPath.md)
- [collectRecursiveSelectionPair](Function.collectRecursiveSelectionPair.md)
- [findGqlNodeByPath](Function.findGqlNodeByPath.md)
- [flattenSpreads](Function.flattenSpreads.md)
- [unpackSelectArgs](Function.unpackSelectArgs.md)


# Class: UnauthenticatedError

Defined in: [IdeaProjects/kit/kit/src/graphql/unauthenticated-error.ts:6](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/unauthenticated-error.ts#L6)

An error that is thrown when a user is not authenticated.

## Extends

- `GraphQLError`

## Constructors

### Constructor

```ts
new UnauthenticatedError(message): UnauthenticatedError;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/unauthenticated-error.ts:11](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/unauthenticated-error.ts#L11)

Creates a new UnauthenticatedError.

#### Parameters

##### message `string` = `'Unauthenticated'`

The error message.

#### Returns `UnauthenticatedError`

#### Overrides

```ts
GraphQLError.constructor
```

## Properties

### extensions {#extensions}

```ts
readonly extensions: GraphQLErrorExtensions;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:89

Extension fields to add to the formatted error.

#### Inherited from

```ts
GraphQLError.extensions
```

***

### locations {#locations}

```ts
readonly locations: readonly SourceLocation[] | undefined;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:58

An array of `{ line, column }` locations within the source GraphQL document
which correspond to this error.

Errors during validation often contain multiple locations, for example to
point out two things with the same name. Errors during execution include a
single location, the field which produced the error.

Enumerable, and appears in the result of JSON.stringify().

#### Inherited from

```ts
GraphQLError.locations
```

***

### nodes {#nodes}

```ts
readonly nodes: readonly ASTNode[] | undefined;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:69

An array of GraphQL AST Nodes corresponding to this error.

#### Inherited from

```ts
GraphQLError.nodes
```

***

### originalError {#originalerror}

```ts
readonly originalError: Error | undefined;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:85

The original error thrown from a field resolver during execution.

#### Inherited from

```ts
GraphQLError.originalError
```

***

### path {#path}

```ts
readonly path: readonly (string | number)[] | undefined;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:65

An array describing the JSON-path into the execution response which
corresponds to this error. Only included for errors during execution.

Enumerable, and appears in the result of JSON.stringify().

#### Inherited from

```ts
GraphQLError.path
```

***

### positions {#positions}

```ts
readonly positions: readonly number[] | undefined;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:81

An array of character offsets within the source GraphQL document
which correspond to this error.

#### Inherited from

```ts
GraphQLError.positions
```

***

### source {#source}

```ts
readonly source: Source | undefined;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:76

The source GraphQL document for the first location of this error.

Note that if this Error represents more than one node, the source may not
represent nodes after the first node.

#### Inherited from

```ts
GraphQLError.source
```

***

### stackTraceLimit {#stacktracelimit}

```ts
static stackTraceLimit: number;
```

Defined in: .yarn/berry/cache/@types-node-npm-24.10.1-d514f50dfd-10c0.zip/node\_modules/@types/node/globals.d.ts:68

The `Error.stackTraceLimit` property specifies the number of stack frames
collected by a stack trace (whether generated by `new Error().stack` or
`Error.captureStackTrace(obj)`).

The default value is `10` but may be set to any valid JavaScript number. Changes
will affect any stack trace captured _after_ the value has been changed.

If set to a non-number value, or set to a negative number, stack traces will
not capture any frames.

#### Inherited from

```ts
GraphQLError.stackTraceLimit
```

## Methods

### toString() {#tostring}

```ts
toString(): string;
```

Defined in: .yarn/berry/cache/graphql-npm-16.12.0-6b85a803c3-10c0.zip/node\_modules/graphql/error/GraphQLError.d.ts:108

Returns a string representation of an object.

#### Returns `string`

#### Inherited from

```ts
GraphQLError.toString
```

***

### captureStackTrace() {#capturestacktrace}

```ts
static captureStackTrace(targetObject, constructorOpt?): void;
```

Defined in: .yarn/berry/cache/@types-node-npm-24.10.1-d514f50dfd-10c0.zip/node\_modules/@types/node/globals.d.ts:52

Creates a `.stack` property on `targetObject`, which when accessed returns
a string representing the location in the code at which
`Error.captureStackTrace()` was called.

```js
const myObject = {};
Error.captureStackTrace(myObject);
myObject.stack;  // Similar to `new Error().stack`
```

The first line of the trace will be prefixed with
`${myObject.name}: ${myObject.message}`.

The optional `constructorOpt` argument accepts a function. If given, all frames
above `constructorOpt`, including `constructorOpt`, will be omitted from the
generated stack trace.

The `constructorOpt` argument is useful for hiding implementation
details of error generation from the user. For instance:

```js
function a() {
  b();
}

function b() {
  c();
}

function c() {
  // Create an error without stack trace to avoid calculating the stack trace twice.
  const { stackTraceLimit } = Error;
  Error.stackTraceLimit = 0;
  const error = new Error();
  Error.stackTraceLimit = stackTraceLimit;

  // Capture the stack trace above function b
  Error.captureStackTrace(error, b); // Neither function c, nor b is included in the stack trace
  throw error;
}

a();
```

#### Parameters

##### targetObject `object`

##### constructorOpt? `Function`

#### Returns `void`

#### Inherited from

```ts
GraphQLError.captureStackTrace
```

***

### prepareStackTrace() {#preparestacktrace}

```ts
static prepareStackTrace(err, stackTraces): any;
```

Defined in: .yarn/berry/cache/@types-node-npm-24.10.1-d514f50dfd-10c0.zip/node\_modules/@types/node/globals.d.ts:56

#### Parameters

##### err `Error`

##### stackTraces `CallSite`[]

#### Returns `any`

#### See

https://v8.dev/docs/stack-trace-api#customizing-stack-traces

#### Inherited from

```ts
GraphQLError.prepareStackTrace
```


# Function: cacheKeyFromGraphqlPath()

```ts
function cacheKeyFromGraphqlPath(info): string;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/cache-key-from-graphql-path.ts:13](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/cache-key-from-graphql-path.ts#L13)

Turns the "info.path" object into a unique string key.
e.g., { prev: { key: "message" }, key: "author" } -> "message.author"

Replaces numbers with empty strings since they are array indexes, and they
are not affecting on cache uniquity. But they are preserved in the key to
not mess with similar keys:
{ prev: { prev: { key: "message" }, key: 0 }, key: "author" } -> "message..author"

## Parameters

### info `Pick`\<`GraphQLResolveInfo`, `"path"`\>

## Returns

`string`


# Function: collectRecursiveSelectionPair()

```ts
function collectRecursiveSelectionPair<T>(
   path, 
   f, 
   getCheckedSubpath, 
   fragments, 
   recur): readonly [string, T] | undefined;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:228](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L228)

Collects recursive selection pairs based on a GraphQL field and its subpath.

This function is utilized for traversing and processing a GraphQL Abstract Syntax Tree (AST),
extracting a defined recursive selection pair from the provided field and its substructure.
It invokes a recursive gating function to process nested selections when a valid subpath is available.

## Type Parameters

### T `T`

The type parameter associated with the recursive gating function.

## Parameters

### path `string`

The current path in the GraphQL query structure.

### f

[`GqlASTField`](TypeAlias.GqlASTField.md)

The current field in the GraphQL AST being processed.

### getCheckedSubpath

(`path`, `f`) => `string` \| `undefined`

A function that determines the subpath for the current field, returning `undefined` if invalid.

### fragments `Record`\<`string`, [`GqlASTFragmentDefinition`](TypeAlias.GqlASTFragmentDefinition.md)\>

A record of GraphQL fragment definitions used for resolving fragment spreads.

### recur `RecursiveSelectionGaterFunction`\<`T`\>

A recursive function that processes the selection set and returns gated selections.

## Returns

readonly \[`string`, `T`\] \| `undefined`

A tuple containing the field's name and the result of the recursive processing for its selection set,
or `undefined` if no valid subpath is found.


# Function: findGqlNodeByPath()

```ts
function findGqlNodeByPath(
   path, 
   field, 
   fragments): GqlASTField | null;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:109](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L109)

Recursively finds a GraphQL node by traversing a path through a GraphQL Abstract Syntax Tree (AST).

## Parameters

### path

readonly `string`[]

An array of strings representing the path to the node in the GraphQL AST.
                                  Each string corresponds to a field name to traverse.

### field

[`GqlASTField`](TypeAlias.GqlASTField.md)

The starting field node in the GraphQL AST to begin the traversal.

### fragments `Record`\<`string`, [`GqlASTFragmentDefinition`](TypeAlias.GqlASTFragmentDefinition.md)\>

A mapping of fragment names to their
                                                              corresponding definitions in the GraphQL AST.

## Returns

[`GqlASTField`](TypeAlias.GqlASTField.md) \| `null`

- The GraphQL AST node found at the specified path, or null if the path
                                does not exist in the AST.

## Throws

- Throws an error if the provided path array is empty, as it expects a non-empty path to traverse.


# Function: flattenSpreads()

```ts
function flattenSpreads(fields, fragments): GqlASTField[];
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:81](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L81)

Recursively processes an array of GraphQL AST fields, fragment spreads, and inline fragment spreads,
and returns a flattened array of `GqlASTField` objects.

## Parameters

### fields

The array of fields, fragment spreads, and inline fragment spreads to be processed.
    It may be `undefined`.

readonly (
\| [`GqlASTField`](TypeAlias.GqlASTField.md)
\| [`GqlASTFragmentSpread`](TypeAlias.GqlASTFragmentSpread.md)
\| [`GqlASTInlineFragmentSpread`](TypeAlias.GqlASTInlineFragmentSpread.md))[] | `undefined`

### fragments `Record`\<`string`, [`GqlASTFragmentDefinition`](TypeAlias.GqlASTFragmentDefinition.md)\>

A map of fragment definitions, keyed by the fragment name.

## Returns

[`GqlASTField`](TypeAlias.GqlASTField.md)[]

A flattened array containing only `GqlASTField` objects from the input fields,
    including those contained within fragment spreads or inline fragments.


# Function: unpackSelectArgs()

```ts
function unpackSelectArgs<Add>(
   opts, 
   fieldNode, 
   fragments, 
   fieldName): UnpackedBasicSelectionOptions & Add;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:155](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L155)

Processes and unpacks selection arguments for a GraphQL field node, combining
user-provided options with information from the GraphQL query AST.

## Type Parameters

### Add `Add` *extends* `Record`\<`string`, `unknown`\>

An additional set of properties that can be extended in the returned object.

## Parameters

### opts

[`BasicSelectionArgs`](TypeAlias.BasicSelectionArgs.md)\<`Add`\>

Selection options, which may include a path, skip list, check function, or additional properties.

### fieldNode

[`GqlASTField`](TypeAlias.GqlASTField.md)

The GraphQL AST field node that serves as the starting point for selection.

### fragments `Record`\<`string`, [`GqlASTFragmentDefinition`](TypeAlias.GqlASTFragmentDefinition.md)\>

A mapping of fragment names to their respective GraphQL AST definitions.

### fieldName `string`

The name of the GraphQL field being processed.

## Returns

`UnpackedBasicSelectionOptions` & `Add`

Processed selection data, including the root node, path, skip set, and additional methods for subpath checks and extensions.

## Throws

If the provided path does not exist within the specified field node or fragments.


# Type Alias: BasicSelectionArgs\<Add\>

```ts
type BasicSelectionArgs<Add> = readonly string[] | BasicSelectionArgsObject & Add | undefined;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:132](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L132)

Arguments for basic selection.

## Type Parameters

### Add `Add` *extends* `Record`\<`string`, `unknown`\>


# Type Alias: GqlASTField

```ts
type GqlASTField = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:25](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L25)

Represents a field node in a GraphQL AST.


# Type Alias: GqlASTFragmentDefinition

```ts
type GqlASTFragmentDefinition = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:43](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L43)

Represents a fragment definition node in a GraphQL AST.


# Type Alias: GqlASTFragmentSpread

```ts
type GqlASTFragmentSpread = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:55](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L55)

Represents a fragment spread node in a GraphQL AST.


# Type Alias: GqlASTInlineFragmentSpread

```ts
type GqlASTInlineFragmentSpread = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:63](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L63)

Represents an inline fragment spread node in a GraphQL AST.


# Type Alias: GqlASTLoc

```ts
type GqlASTLoc = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:6](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L6)

Represents the location of a node in a GraphQL AST.


# Type Alias: GqlASTName

```ts
type GqlASTName = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:11](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L11)

Represents a name node in a GraphQL AST.


# Type Alias: GqlASTSelectionSet

```ts
type GqlASTSelectionSet = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:16](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L16)

Represents a selection set node in a GraphQL AST.


# Type Alias: GqlContextInfo

```ts
type GqlContextInfo = object;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:186](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L186)

Information about the current GraphQL context.

## Properties

### fieldName {#fieldname}

```ts
fieldName: string;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:190](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L190)

The name of the field being resolved.

***

### fieldNodes {#fieldnodes}

```ts
fieldNodes: GqlASTField[];
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:194](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L194)

The AST nodes for the field being resolved.

***

### fragments {#fragments}

```ts
fragments: Record<string, GqlASTFragmentDefinition>;
```

Defined in: [IdeaProjects/kit/kit/src/graphql/graphql-traverse.ts:198](https://github.com/iagurban/kit/blob/78aea32be2811f93b17aa1de9430feb1fbc049c8/src/graphql/graphql-traverse.ts#L198)

A map of fragment definitions.
